<beast version='2.0'
       namespace='beast.core:beast.evolution.tree.coalescent:beast.core.util:beast.evolution.nuc:beast.evolution.operators:beast.evolution.sitemodel:beast.evolution.substitutionmodel:beast.evolution.branchratemodel:beast.evolution.likelihood:beast.core.parameter:beast.math.distributions:beast.evolution.operators.util'>

    <input spec="ParameterList" id="parameterList">
        <parameter spec="RealParameter" id="parameter1" value="3" upper="5.0" lower="0.0"/>
        <parameter spec="RealParameter" id="parameter2" value="2" upper="5.0" lower="0.0"/>
    </input>

    <input spec="DPPointer" id="pointer">
        <input name="uniqueParameter" idref="parameter1"/>
        <input name="uniqueParameter" idref="parameter2"/>
        <input name="initialAssignment" spec="IntegerParameter" value="0 1 1" lower="0" upper="1"/>
    </input>

    <input spec="DPValuable" id="dpValuable">
        <input spec="ParameterList" name="paramList" idref="parameterList"/>
        <input spec="DPPointer" name="pointers" idref="pointer"/>
    </input>

    <input spec="DirichletProcess" id="dp">
        <input name="dpVal" idref="dpValuable"/>
        <input name="baseDistr" spec="beast.math.distributions.IntegerUniformDistribution" lower="0.0" upper="5.0"/>
        <input name="alpha" spec="RealParameter" value="1.0" lower="0.0" upper="Infinity"/>
    </input>

    <input spec="DummyLikelihood" id="likelihood">
        <input name="plugin" idref="parameterList"/>
    </input>

    <run spec="MCMC" id="mcmc" chainLength="1000000"> <!--autoOptimize="true"-->
        <state>
            <input name='stateNode' idref='parameterList'/>
            <input name='stateNode' idref='pointer'/>
        </state>

        <distribution spec="CompoundDistribution" id="posterior">
            <distribution idref="likelihood"/>
            <distribution id="prior" spec="beast.math.distributions.ParameterListPrior" applyToList="true">
                <input name="distribution" idref="dp"/>
                <xList idref="parameterList"/>
            </distribution>
        </distribution>

        <operator id="dpps" spec="DirichletProcessPriorGibbsSampler" weight="1" sampleSize="1">
            <input name="likelihood" idref="likelihood"/>
            <input name="xList" idref="parameterList"/>
            <input name="pointers" idref="pointer"/>
            <input name="dirichletProcess" idref="dp"/>
            <input name="dpVal" idref="dpValuable"/>
        </operator>
        <operator id="PLNetworkIntRandomWalk" spec="PLNetworkIntRandomWalkOperator" weight="1">
            <input id="jc" spec='Vertex' name="vertex" idNum="0" neighbours="1 2"/>
            <input id="k80" spec='Vertex' name="vertex" idNum="1" neighbours="0 3"/>
            <input id="f81" spec='Vertex' name="vertex" idNum="2" neighbours="0 3"/>
            <input id="hky85" spec='Vertex' name="vertex" idNum="3" neighbours="1 2 4"/>
            <input id="tn93" spec='Vertex' name="vertex" idNum="4" neighbours="3 5"/>
            <input id="gtr" spec='Vertex' name="vertex" idNum="5" neighbours="4"/>
            <input name="parameters" idref="parameterList"/>
        </operator>

        <logger logEvery="100000">
            <log idref="posterior"/>
            <log idref="prior"/>
            <log idref="likelihood"/>
            <log idref="dpValuable"/>
            <log idref="pointer"/>
        </logger>

        <logger logEvery="10" fileName="testDirichletProcessPriorGibbsSampler_7.log">
            <log idref="posterior"/>
            <log idref="prior"/>
            <log idref="likelihood"/>
            <log idref="pointer"/>
            <log idref="dpValuable"/>
        </logger>
    </run>
</beast>